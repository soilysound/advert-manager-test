const component = require('../js/modules/components/advert-takeover-listener.js');

describe('Advert takeover listener', () => {

  it("is an object", () => {
    expect(typeof component).to.equal('object');
  });

  it("has method initCss", () => {
    expect(typeof component.initCss).to.equal('function');
  });

  it("has method init", () => {
    expect(typeof component.init).to.equal('function');
  });

  it('creates a style tag using the specified css selector', () => {
    const func = component;
    func.cssSelector = '.selector-clive';
    func.initCss();
    const style = document.querySelector('style');
    expect(!!style).to.equal(true);
    expect(style.textContent).to.contain('.selector-clive');
  });

  it('calls initCss when init is called', () => {
    const spy = sinon.spy(component, 'initCss');
    component.init();
    expect(spy.called).to.equal(true);
  });

  it('creates a style tag using the specified css selector', () => {
    const func = component;
    const event = document.createEvent('Event');
    event.animationName = "ad-takeover";
    event.initEvent('animationstart');
    document.dispatchEvent(event);
    expect(document.body.className).to.equal('advert--site-takeover');

  });

});
