define('lock-body', [], function () {

  "use strict";

  return {

    init: function(){

      if(!window.MutationObserver){
        return;
      }

      let self = this;

      // create new observer listening for data-body-locked attribute on the body
      const observer = new MutationObserver(function(mutations) {

        mutations.forEach(function(mutation) {
          // if an oldValue exists this means body-lock is set, and needs to be removed
          self.toggleLock(!mutation.oldValue);
        });

      });

      observer.observe(document.body, {
        attributes: true,
        attributeOldValue: true,
        attributeFilter: ['data-body-locked']
      });

    },

    toggleLock: function(lock){

      const body = document.body;
      let scrollTop = body.getAttribute('data-body-y-offset') || false;
      let top = null;
      let position = null;

      if (lock) {
        scrollTop = window.pageYOffset;
        top = (scrollTop * -1) + "px";
        position = "fixed";
        body.setAttribute('data-body-y-offset', scrollTop);
      }

      body.style.top = top;
      body.style.position = position;

      if(scrollTop){
         window.scrollTo(0, parseInt(scrollTop, 10));
      }

    }

  }

});
